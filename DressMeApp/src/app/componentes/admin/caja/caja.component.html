<app-navbar></app-navbar>

<div class="container">

  <div class="row mt-4">
    <div class="col-md">
      <h1 class="nombre">Caja DressMe</h1>
      <br>
      <h2>Articulos</h2>
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Articulo</th>
            <th class="text-right">Precio</th>
            <th>Seleccionar</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let articulo of articulos$ | async">
            <td>{{ articulo.titulo }}</td>
            <td>{{ articulo.precio }}</td>
            <td>
              <input type="checkbox" [(ngModel)]="articulo.selected" (change)="seleccionarArticulo(articulo)">
            </td>
          </tr>
        </tbody>
      </table>

      <!-- Botón para generar factura -->
      <button class="btn btn-success m-2" (click)="abrirFormularioAgregarArticulos()">Generar Factura</button>
    </div>
  </div>
</div>
<div class="factura-container">
  <div class="factura-form">
    <div class="row mt-4">
      <div class="col-md">
        <!-- Tu formulario para agregar artículos -->

        <div *ngIf="mostrarFormularioAgregarArticulos">
          <form [formGroup]="facturaForm" (ngSubmit)="agregarAFactura()">

            <!-- Aquí van tus campos de formulario -->
            <div class="factura-header">
              <h2>Factura de Compra</h2>
              <div class="factura-info">
                <label class="col-form-label"> N°:</label>
                <span>{{ facturaForm.get('numeroFactura')?.value }}</span>
              </div>
            </div>
            <div class="factura-detalle">
              <div class="form-group">
                <label for="articulo">Artículo:</label>
                <ul>
                  <li *ngFor="let item of facturaItems">{{ item.articulo }} - ${{ item.precioUnitario }}</li>
                </ul>
              </div>
              <div class="form-group">
                <label for="fechaAlquiler">Fecha de alquiler:</label>
                <input type="date" formControlName="fechaAlquiler" class="form-control">
              </div>
              <div class="form-group">
                <label for="fechaEntrega">Fecha de entrega:</label>
                <input type="date" formControlName="fechaEntrega" class="form-control">
              </div>
              <div class="form-group">
                <label for="cliente">Cliente:</label>
                <input type="text" formControlName="cliente" class="form-control">
              </div>
              <div class="form-group">
                <label for="total">Total:</label>
                <div class="input-group">
                  <span class="input-group-text">$</span>
                  <input type="text" id="total" class="form-control" [value]="calcularPrecioTotal()" readonly>
                </div>
              </div>
            </div>
            <!-- Puedes agregar más campos según tus necesidades -->
            <button type="submit" class="btn btn-success">Generar</button>
            <button type="button" class="btn btn-danger" (click)="cerrarFormularioAgregarArticulos()">Cancelar</button>
          </form>
        </div>
      </div>

    </div>
  </div>
</div>